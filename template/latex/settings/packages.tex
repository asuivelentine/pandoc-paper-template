$if(fontfamily)$
    \usepackage[$fontfamilyoptions$]{$fontfamily$}
$else$
    %\usepackage{lmodern}
$endif$

$if(linestretch)$
    \usepackage{setspace}
    \setstretch{$linestretch$}
$endif$

\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\usepackage{dingbat}
\usepackage{color}
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
\usepackage[hyphens]{url}
\usepackage[babel, german=quotes]{csquotes}
\usepackage{index}
\usepackage[toc]{glossaries}
\usepackage{mathtools}
\usepackage{tocloft}
\usepackage{caption}
\usepackage{wrapfig}
\usepackage{chngcntr}
\usepackage{fancyhdr}
\usepackage{bibgerm}
\usepackage[printonlyused]{acronym}

\makeindex

\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
    \usepackage[$if(fontenc)$$fontenc$$else$T1$endif$]{fontenc}
    \usepackage[utf8]{inputenc}

    $if(euro)$
        \usepackage{eurosym}
    $endif$

\else % if luatex or xelatex
    \ifxetex
        \usepackage{mathspec}
    \else
        \usepackage{fontspec}
    \fi

    \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
    \newcommand{\euro}{â‚¬}

    $if(mainfont)$
        \setmainfont[$mainfontoptions$]{$mainfont$}
    $endif$

    $if(sansfont)$
        \setsansfont[$sansfontoptions$]{$sansfont$}
    $endif$

    $if(monofont)$
        \setmonofont[Mapping=tex-ansi$if(monofontoptions)$,$monofontoptions$$endif$]{$monofont$}
    $endif$

    $if(mathfont)$
        \setmathfont(Digits,Latin,Greek)[$mathfontoptions$]{$mathfont$}
    $endif$

    $if(CJKmainfont)$
        \usepackage{xeCJK}
        \setCJKmainfont[$CJKoptions$]{$CJKmainfont$}
    $endif$
\fi

% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}

% use microtype if available
\IfFileExists{microtype.sty}{%
    \usepackage{microtype}
    \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}

$if(geometry)$
    \usepackage[$for(geometry)$$geometry$$sep$,$endfor$]{geometry}
$endif$

\usepackage[
	colorlinks=false,
   	linkcolor=black,
   	citecolor=black,
  	filecolor=black,
	urlcolor=black,
    bookmarks=true,
    bookmarksopen=true,
    bookmarksopenlevel=3,
    bookmarksnumbered,
    plainpages=false,
    pdfpagelabels=true,
    hyperfootnotes,
    pdftitle ={\docTitle},
    %pdfauthor={\docFirstname~\docLastname},
    %pdfcreator={\docFirstname~\docLastname}
    ]{hyperref}

\PassOptionsToPackage{usenames,dvipsnames}{color} % color is loaded by hyperref

\hypersetup{breaklinks=true,
    unicode=true,$if(title-meta)$
    pdftitle={$title-meta$},$endif$$if(author-meta)$
    pdfauthor={$author-meta$},$endif$$if(subtitle)$
    pdfsubject={$subtitle$},$endif$$if(keywords)$
    pdfkeywords={$keywords$},$endif$
    colorlinks=true,
    citecolor=$if(citecolor)$$citecolor$$else$black$endif$,
    urlcolor=$if(urlcolor)$$urlcolor$$else$black$endif$,
    linkcolor=$if(linkcolor)$$linkcolor$$else$black$endif$,
    pdfborder={0 0 0}$if(hidelinks)$,
        hidelinks
    $endif$
}

\urlstyle{same}  % don't use monospace font for urls

$if(lang)$
    \ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
        \usepackage[shorthands=off,$for(babel-otherlangs)$$babel-otherlangs$$sep$,$endfor$,main=$babel-lang$]{babel}
        $babel-newcommands$
    \else
        \usepackage{polyglossia}
        \setmainlanguage[$polyglossia-lang.options$]{$polyglossia-lang.name$}
        $for(polyglossia-otherlangs)$
            \setotherlanguage[$polyglossia-otherlangs.options$]{$polyglossia-otherlangs.name$}
        $endfor$
    \fi
$endif$

$if(natbib)$
    \usepackage{natbib}
    \bibliographystyle{$if(biblio-style)$$biblio-style$$else$plainnat$endif$}
$endif$

$if(biblatex)$
    \usepackage{biblatex}
    $for(bibliography)$
    \addbibresource{$bibliography$}
    $endfor$
$endif$

$if(listings)$
    \usepackage{listings}
$endif$

$if(lhs)$
    \lstnewenvironment{code}{\lstset{language=Haskell,basicstyle=\small\ttfamily}}{}
$endif$

$if(highlighting-macros)$
    $highlighting-macros$
$endif$

$if(verbatim-in-note)$
    \usepackage{fancyvrb}
    \VerbatimFootnotes % allows verbatim text in footnotes
$endif$

$if(tables)$
    \usepackage{longtable,booktabs}
$endif$

$if(graphics)$
    \ifx\pdftexversion\undefined
        \usepackage[dvips]{graphicx}
    \else
        \usepackage[pdftex]{graphicx}
        \DeclareGraphicsRule{*}{mps}{*}{}
    \fi
    \usepackage{grffile}
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
    \def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
    \makeatother
    % Scale images if necessary, so that they will not overflow the page
    % margins by default, and it is still possible to overwrite the defaults
    % using explicit options in \includegraphics[width, height, ...]{}
    \setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
$endif$

\usepackage{amssymb,amsmath}
